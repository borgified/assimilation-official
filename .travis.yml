sudo: required

language: generic

install:
  - mkdir build-artifacts
  - cp README.md build-artifacts

jobs:
  include:
    - stage: build
      name: debian
      script:
        - cp $TRAVIS_BUILD_DIR/docker/dockerfiles/debian/9/Dockerfile .
        - cp $TRAVIS_BUILD_DIR/docker/dockerfiles/debian/9/timezone .
          #- docker build .
    - stage: build
      name: ubuntu
      script:
        - cp $TRAVIS_BUILD_DIR/docker/dockerfiles/ubuntu/18.04/Dockerfile .
        - cp $TRAVIS_BUILD_DIR/docker/dockerfiles/ubuntu/18.04/timezone .
          #- docker build .
    - stage: test
      name: test
      script:
        - echo "testing stuff"
    - stage: deploy
      name: deploy
      script: skip
      deploy:
        provider: s3
        endpoint: https://s3.us-east.objectstorage.softlayer.net
        region: us-east
        bucket: assimilation-official
        local_dir: build-artifacts
        upload-dir: build-artifacts
